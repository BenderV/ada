{
    "name": "PLOT_WIDGET",
    "description": "Display a plot",
    "parameters": {
      "type": "object",
      "properties": {
        "caption": {
          "type": "string",
          "description": "Widget caption"
        },
        "outputType": {
          "type": "string",
          "description": "Output type",
          "enum": ["Doughnut2d", "Column2d", "Table", "Line"]
        },
        "sql": {
          "type": "string",
          "description": "SQL query"
        },
        "params": {
          "type": "object",
          "description": "Widget parameters"
        },
        "data_preprocessing": {
          "type": "string",
          "description": "Python code to transform result from SQL so it can be rendered by FusionCharts. It has access to 'result' variable. The transformed result should be stored in 'processed_result' variable.",
          "example": "import pandas as pd\ndf = pd.DataFrame(result)\nprocessed_result = df.groupby('category').sum().reset_index().to_dict('records')"
        },
        "verify": {
          "type": "boolean",
          "description": "Verify the rendering of the chart (you should do this once for each widget)"
        }
      },
      "required": ["caption", "outputType", "sql", "params", "verify"]
    }
}
